<!DOCTYPE html>
<html lang="zxx">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Rau Củ Quả Đà Lạt" />
    <meta
      name="keywords"
      content="rau củ quả, Đà Lạt, thực phẩm sạch, thực phẩm an toàn"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Rau Củ Quả | Đà Lạt</title>
    <!-- 
    Google Font
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;900&display=swap"
      rel="stylesheet"
    /> -->

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="css/nice-select.css" type="text/css" />
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />

    <!-- <link rel="stylesheet" href="css/phuong.css" type="text/css" /> -->
  </head>

  <body>
    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section set-bg" data-setbg="img/breadcrumb.jpg">
      <div class="container">
        <div class="row">
          <div class="col text-center">
            <h3>Rau Củ Quả Đà Lạt</h3>
            <span>Số điện thoại: 0762 0808 72</span>
          </div>
        </div>
      </div>
    </section>
    <!-- Breadcrumb Section End -->

    <form id="test-form" action="#">
      <!-- Form nhập Begin -->

      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="checkout__input">
              <p>Tên<span>*</span></p>
              <input type="text" name="name" placeholder="Nhập tên:" />
            </div>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="checkout__input">
              <p>Điện thoại<span>*</span></p>
              <input type="tel" name="phone" placeholder="Điện thoại: " />
            </div>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="checkout__input">
              <p>Địa chỉ<span>*</span></p>
              <input type="text" name="address" placeholder="Địa chỉ: " />
            </div>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="checkout__input">
              <p>Note</p>
              <input type="text" name="note" placeholder="Ghi chú: " />
            </div>
          </div>
        </div>
      </div>
      <!-- Form nhập End -->

      <!-- Đặt hàng Begin -->
      <div class="container">
        <div class="row">
          <div class="col-lg-6">
            <div class="shoping__checkout">
              <ul>
                <li>
                  Tổng cộng (chưa bao gồm phí) <span id="tongTien"> 350k </span>
                </li>
              </ul>
              <a href="#" class="primary-btn" id="submit-form">Đặt Hàng</a>
            </div>
          </div>
        </div>
      </div>
      <!-- Đặt hàng End -->

      <!-- Shoping Cart Section Begin -->
      <div class="container">
        <div class="row">
          <div class="col">
            <table
              id="myTable"
              class="
                table table-striped table-hover table-responsived table-bordered
              "
            >
              <thead>
                <tr>
                  <th clas="col-1">stt</th>
                  <th clas="col-4">Mặt hàng</th>
                  <th clas="col-1">Giá</th>
                  <th clas="col-1">Số lượng</th>
                  <th clas="col-1">Tổng</th>
                  <th clas="col-4">Ghi chú</th>
                </tr>
              </thead>
              <tbody id="tableBody"></tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Shoping Cart Section End -->
    </form>

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script type="text/javascript">
      var postUrl =
        "https://script.google.com/macros/s/AKfycbzuQ4HlRTcd6Ilnj25ZTcppEnWnS9gyVm_ho1wZUXpCj_ngwSRNxcKyZ8tAJALIQLbB/exec";
      $(document).ready(function () {
        //var submit = $("button[type='submit']");
        var submit = $("#submit-form");
        submit.click(function () {
          var data = $("form#test-form").serialize();
          $.ajax({
            type: "GET",
            url: postUrl,
            dataType: "json",
            crossDomain: true,
            data: data,
            success: function (data) {
              if (data == "false") {
                alert("Có lỗi, xin hãy nhập lại! Hoặc gọi cho hotline.");
              } else {
                alert(
                  "Cảm ơn quý khách đã ủng hộ. Chúng tôi sẽ gọi điện xác nhận đơn hàng trước khi giao cho quý khách!"
                );
              }
            },
          });
          return false;
        });
      });

      const log = console.log;
      var arrData = [];
      let xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          let data = JSON.parse(this.responseText).feed.entry;
          //console.log(data);
          let i;
          for (i = 0; i < data.length; i++) {
            let stt = data[i]["gsx$stt"]["$t"];
            let mathang = data[i]["gsx$mathang"]["$t"];
            let gia = data[i]["gsx$gia"]["$t"];
            gia = Number(gia);
            let soluong = 0;
            let tong = gia * soluong;
            let ghichu = data[i]["gsx$ghichu"]["$t"];

            var obj;
            obj = {
              stt: stt,
              mathang: mathang,
              gia: gia,
              soluong: soluong,
              tong: tong,
              ghichu: ghichu,
            };
            arrData.push(obj);

            document.getElementById("tableBody").innerHTML += `
                  <tr>
                      <th scope="row">${stt}</th>
                      <td>${mathang}</td>
                      <td id="gia${i + 1}">${gia}</td>
                      <td>
                          <input type="number" list="defaultNumbers" style="padding: 1px; width: 4em;"
                          min="0" max="20" step="0.5" name="${stt}">
                          <datalist id="defaultNumbers">
                          <option value="1">
                          <option value="2">
                          <option value="3">
                      </datalist>
                      </td>
                      <td id="tong${i + 1}">${tong}</td>
                      <td>${ghichu}</td>
                  </tr>
                  `;
          }
        }
      };
      const getUrl =
        "https://spreadsheets.google.com/feeds/list/1WYNSjXC755-_PumH4BU4d8lCFGjocs6m8E-EOdS40aQ/od6/public/values?alt=json";
      xmlhttp.open(
        "GET",
        getUrl,
        //"https://spreadsheets.google.com/feeds/list/1WYNSjXC755-_PumH4BU4d8lCFGjocs6m8E-EOdS40aQ/od6/public/values?alt=json",
        true
      );
      xmlhttp.send();
    </script>
  </body>
</html>
